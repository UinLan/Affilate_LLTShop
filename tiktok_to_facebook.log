2025-06-23 14:40:30,305 - ERROR - Product 685904ecf59e60948da0fb6d not found
2025-06-23 19:35:06,761 - INFO - ✅ Đăng bài thành công với ID: 684490454749490_122096634968925790
2025-06-23 19:41:30,789 - ERROR - ❌ Lỗi khi đăng bài: name 'image_urls' is not defined
2025-06-23 19:45:04,192 - INFO - ✅ Đăng bài thành công với ID: 684490454749490_122096640812925790
2025-06-23 19:47:54,066 - INFO - ✅ Đăng bài thành công với ID: 684490454749490_122096641670925790
2025-06-23 19:54:59,885 - INFO - ✅ Đăng bài thành công với ID: 684490454749490_122096644940925790
2025-06-23 20:23:18,838 - ERROR - Lỗi GPT: 

You tried to access openai.ChatCompletion, but this is no longer supported in openai>=1.0.0 - see the README at https://github.com/openai/openai-python for the API.

You can run `openai migrate` to automatically upgrade your codebase to use the 1.0.0 interface. 

Alternatively, you can pin your installation to the old version, e.g. `pip install openai==0.28`

A detailed migration guide is available here: https://github.com/openai/openai-python/discussions/742

2025-06-23 20:23:18,838 - WARNING - GPT không tạo được caption. Dùng fallback.
2025-06-23 20:23:29,024 - INFO - ✅ Đăng bài thành công: 684490454749490_122096678042925790
2025-06-23 20:31:42,115 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 404 Not Found"
2025-06-23 20:31:42,115 - ERROR - Lỗi GPT: Error code: 404 - {'error': {'message': 'The model `gpt-4` does not exist or you do not have access to it.', 'type': 'invalid_request_error', 'param': None, 'code': 'model_not_found'}}
2025-06-23 20:31:42,115 - WARNING - GPT không tạo được caption. Dùng fallback.
2025-06-23 20:31:51,759 - INFO - ✅ Đăng bài thành công: 684490454749490_122096682548925790
2025-06-23 20:42:47,147 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 429 Too Many Requests"
2025-06-23 20:42:47,147 - INFO - Retrying request to /chat/completions in 0.487545 seconds
2025-06-23 20:42:48,273 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 429 Too Many Requests"
2025-06-23 20:42:48,273 - INFO - Retrying request to /chat/completions in 0.840581 seconds
2025-06-23 20:42:49,942 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 429 Too Many Requests"
2025-06-23 20:42:49,942 - ERROR - Lỗi GPT: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}
2025-06-23 20:42:49,942 - WARNING - GPT không tạo được caption. Dùng fallback.
2025-06-23 20:42:53,447 - ERROR - Lỗi tải ảnh 	https://p16-oec-sg.ibyteimg.com/tos-alisg-i-aphluv…shp=6ce186a1&shcp=e1be8f53&idc=my&from=1826719393: 400 Client Error: Bad Request for url: https://p16-oec-sg.ibyteimg.com/tos-alisg-i-aphluv%E2%80%A6shp=6ce186a1&shcp=e1be8f53&idc=my&from=1826719393
2025-06-23 20:42:57,789 - INFO - ✅ Đăng bài thành công: 684490454749490_122096688794925790
2025-06-23 21:01:19,083 - ERROR - Facebook authentication failed
2025-06-23 21:07:25,218 - INFO - All services initialized successfully
2025-06-23 21:07:26,550 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 429 Too Many Requests"
2025-06-23 21:07:26,550 - INFO - Retrying request to /chat/completions in 0.396101 seconds
2025-06-23 21:07:27,876 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 429 Too Many Requests"
2025-06-23 21:07:27,876 - INFO - Retrying request to /chat/completions in 0.958515 seconds
2025-06-23 21:07:29,621 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 429 Too Many Requests"
2025-06-23 21:07:29,621 - WARNING - OpenAI error: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}
2025-06-23 21:07:32,983 - INFO - Posted successfully: 684490454749490_122096700134925790
2025-06-23 21:13:00,727 - INFO - All services initialized successfully
2025-06-23 21:13:02,008 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 429 Too Many Requests"
2025-06-23 21:13:02,008 - INFO - Retrying request to /chat/completions in 0.404742 seconds
2025-06-23 21:13:02,693 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 429 Too Many Requests"
2025-06-23 21:13:02,693 - INFO - Retrying request to /chat/completions in 0.784232 seconds
2025-06-23 21:13:03,772 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 429 Too Many Requests"
2025-06-23 21:13:03,787 - WARNING - OpenAI error: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}
2025-06-23 21:13:06,753 - INFO - Posted successfully: 684490454749490_122096705894925790
2025-06-23 21:24:16,241 - INFO - All services initialized successfully
2025-06-23 21:24:20,803 - INFO - Posted successfully: 684490454749490_122096715152925790
2025-06-23 21:30:15,713 - INFO - All services initialized successfully
2025-06-23 21:30:31,535 - INFO - Posted successfully: 684490454749490_122096727320925790
2025-06-24 00:00:12,859 - INFO - All services initialized successfully
2025-06-24 00:00:16,790 - ERROR - Failed to post product 6859881a86802b67ecc25005: Facebook post failed: (#100) param attached_media must be an array.
Traceback (most recent call last):
  File "C:\tiktok_to_facebook\tiktok_to_facebook.py", line 293, in process_product
    post = self.graph.request(f"{self.fb_page_id}/feed", method="POST", post_args=post_args)
  File "C:\Users\DELL\AppData\Local\Programs\Python\Python310\lib\site-packages\facebook\__init__.py", line 313, in request
    raise GraphAPIError(result)
facebook.GraphAPIError: (#100) param attached_media must be an array.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\tiktok_to_facebook\tiktok_to_facebook.py", line 297, in process_product
    raise FacebookPostError(f"Facebook post failed: {str(e)}") from e
FacebookPostError: Facebook post failed: (#100) param attached_media must be an array.
2025-06-24 00:08:18,550 - INFO - All services initialized successfully
2025-06-24 00:08:22,308 - CRITICAL - Unexpected error processing product 68598a01194db70b6a5864f5: (#100) param attached_media must be an array.
Traceback (most recent call last):
  File "C:\tiktok_to_facebook\tiktok_to_facebook.py", line 227, in process_product
    post = self.graph.request(f"{self.fb_page_id}/feed", method="POST", post_args=post_args)
  File "C:\Users\DELL\AppData\Local\Programs\Python\Python310\lib\site-packages\facebook\__init__.py", line 313, in request
    raise GraphAPIError(result)
facebook.GraphAPIError: (#100) param attached_media must be an array.
2025-06-24 10:43:26,089 - WARNING - Image upload failed: Error validating access token: Session has expired on Monday, 23-Jun-25 11:00:00 PDT. The current time is Monday, 23-Jun-25 20:43:25 PDT.
2025-06-24 10:43:28,528 - WARNING - Image upload failed: Error validating access token: Session has expired on Monday, 23-Jun-25 11:00:00 PDT. The current time is Monday, 23-Jun-25 20:43:27 PDT.
2025-06-24 10:43:30,817 - WARNING - Image upload failed: Error validating access token: Session has expired on Monday, 23-Jun-25 11:00:00 PDT. The current time is Monday, 23-Jun-25 20:43:29 PDT.
2025-06-24 10:43:30,817 - ERROR - Failed to post product 685a1edb490d6496ccf86f2e: RetryError[<Future at 0x22c66541fc0 state=finished raised Exception>]
2025-06-24 10:49:45,723 - ERROR - Failed to post product 685a205379c2353a91940686: An unknown error has occurred.
2025-06-24 14:11:21,120 - WARNING - Image upload failed: Error validating access token: Session has expired on Monday, 23-Jun-25 22:00:00 PDT. The current time is Tuesday, 24-Jun-25 00:11:19 PDT.
2025-06-24 14:11:23,550 - WARNING - Image upload failed: Error validating access token: Session has expired on Monday, 23-Jun-25 22:00:00 PDT. The current time is Tuesday, 24-Jun-25 00:11:22 PDT.
2025-06-24 14:11:26,206 - WARNING - Image upload failed: Error validating access token: Session has expired on Monday, 23-Jun-25 22:00:00 PDT. The current time is Tuesday, 24-Jun-25 00:11:24 PDT.
2025-06-24 14:11:26,215 - ERROR - Failed to post product 685a4f95b63d720f372bccdb: RetryError[<Future at 0x28096201f60 state=finished raised Exception>]
2025-06-24 21:57:44,098 - WARNING - Image upload failed: Error validating access token: Session has expired on Tuesday, 24-Jun-25 02:00:00 PDT. The current time is Tuesday, 24-Jun-25 07:57:42 PDT.
2025-06-24 21:57:44,450 - WARNING - Image upload failed: Error validating access token: Session has expired on Tuesday, 24-Jun-25 02:00:00 PDT. The current time is Tuesday, 24-Jun-25 07:57:43 PDT.
2025-06-24 21:57:46,954 - WARNING - Image upload failed: Error validating access token: Session has expired on Tuesday, 24-Jun-25 02:00:00 PDT. The current time is Tuesday, 24-Jun-25 07:57:45 PDT.
2025-06-24 21:57:47,364 - WARNING - Image upload failed: Error validating access token: Session has expired on Tuesday, 24-Jun-25 02:00:00 PDT. The current time is Tuesday, 24-Jun-25 07:57:46 PDT.
2025-06-24 21:57:49,758 - WARNING - Image upload failed: Error validating access token: Session has expired on Tuesday, 24-Jun-25 02:00:00 PDT. The current time is Tuesday, 24-Jun-25 07:57:48 PDT.
2025-06-24 21:57:50,214 - WARNING - Image upload failed: Error validating access token: Session has expired on Tuesday, 24-Jun-25 02:00:00 PDT. The current time is Tuesday, 24-Jun-25 07:57:48 PDT.
2025-06-24 21:57:50,214 - ERROR - Failed to post product 685abce4a694cff250fad216: RetryError[<Future at 0x220ad3c1f60 state=finished raised Exception>]
